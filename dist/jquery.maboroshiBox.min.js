/*!
 *  jQuery.maboroshiBox.js
 *  MIT-style license.
 *  2014 maboroshi, inc.
 */
!function(a,b){"use strict";function c(){this.$bgLayer=a('<div class="maboroshiBox__bgLayer"/>'),this.$closeButton=a('<span class="maboroshiBox__closeButton">閉じる</span>'),this._init()}var d=Array.prototype,e=d.slice,f={debug:function(){var a=function(){alert(arguments[0])};return"console"in b&&(a=function(){var a=e.call(arguments);console.log(a)}),a}(),wait:function(b){var c=a.Deferred();return setTimeout(function(){c.resolve()},+b),c.promise()},clickEvent:function(){return"touchend"in b?"touchend":"click"}()};c.prototype._init=function(){var a=this;a.$bgLayer.appendTo("body"),a.$bgLayer.on(f.clickEvent,function(){a._close()}),a.$closeButton.on(f.clickEvent,function(){a._close()})},c.prototype._open=function(b,c,d){var e;return"inline"===d.type&&(e=a(c.attr("href"))),this.$bgLayer.fadeIn("fast"),e.addClass("js-maboroshiBox--visible").append(this.$closeButton).fadeIn("fast").css({top:this._getTop(e)}),b.preventDefault(),!1},c.prototype._close=function(){a(".js-maboroshiBox--visible").removeClass("js-maboroshiBox--visible").fadeOut("fast"),this.$bgLayer.fadeOut("slow")},c.prototype._getTop=function(c){var d=a(b).height(),e=c.height();return(d-e)/2},c.prototype.bindEvent=function(b){var c=a(b.el),d=this;c.on(f.clickEvent,function(a){d._open.apply(d,[a,c,b.options])})};var g=new c;a.fn.maboroshiBox=function(b){return b=a.extend({type:"inline"},b),this.each(function(a,c){g.bindEvent({el:c,options:b})})}}(jQuery,this);